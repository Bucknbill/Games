<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTMS Gaming</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

  :root {
    --accent: #80d0ff;
    --text: #f3f9ff;
    --nav-bg: rgba(0, 0, 0, 0.4);
    --card-bg: rgba(255, 255, 255, 0.12);
    --rainbow: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
  }

  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle at bottom, #0d0130, #000010 80%);
    overflow: hidden;
    height: 100vh;
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.5s;
  }

  /* Galaxy background */
  body::before {
    content:"";
    position:absolute; top:0; left:0; width:300%; height:300%;
    background-image:
      radial-gradient(1.5px 1.5px at 20px 30px, white, transparent),
      radial-gradient(1.5px 1.5px at 200px 400px, white, transparent),
      radial-gradient(1px 1px at 600px 100px, white, transparent),
      radial-gradient(2px 2px at 800px 700px, white, transparent),
      radial-gradient(1px 1px at 1000px 200px, white, transparent),
      radial-gradient(1.5px 1.5px at 1200px 800px, white, transparent),
      radial-gradient(1px 1px at 400px 1200px, white, transparent);
    background-repeat: repeat;
    background-size: 800px 800px;
    animation: drift 120s linear infinite, twinkle 5s ease-in-out infinite alternate;
    z-index: -1; opacity: 0.7;
  }

  @keyframes drift { from { transform: translate(0,0);} to { transform: translate(-200px,-200px);} }
  @keyframes twinkle {0%{opacity:0.4}50%{opacity:0.8}100%{opacity:0.5}}

  /* Lock Screen */
  .card { background: var(--card-bg); padding:30px; border-radius:25px; text-align:center; max-width:380px; width:90%; box-shadow:0 0 25px rgba(128,208,255,0.4); backdrop-filter: blur(12px);}
  h1{margin-bottom:10px;}
  input{padding:12px; border-radius:20px; border:2px solid var(--accent); outline:none; width:80%; margin-bottom:10px; font-size:15px; text-align:center; background:transparent; color:var(--text);}
  button{background: var(--accent); color:#0d0130; border:none; border-radius:20px; padding:10px 20px; cursor:pointer; font-size:15px; font-weight:600; transition: transform 0.15s, background 0.2s;}
  button:hover{transform: scale(1.05); background:#a3e3ff;}
  .msg{margin-top:10px; color:#ff7575; font-size:14px;}

  /* Main site */
  .main-site{display:none; flex-direction:column; width:100%; height:100%; animation: fadeIn 0.8s ease forwards;}
  @keyframes fadeIn{from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);}}

  .navbar{display:flex; justify-content:space-between; align-items:center; padding:14px 25px; background:var(--nav-bg); backdrop-filter:blur(8px); position:relative;}
  .nav-left, .nav-center, .nav-right, .nav-extra{font-weight:600; color:var(--text); cursor:pointer; transition: color 0.2s;}
  .nav-left:hover, .nav-center:hover, .nav-right:hover, .nav-extra:hover{color:var(--accent);}
  .nav-center{position:absolute; left:50%; transform:translateX(-50%);}
  .nav-extra{position:absolute; right:50px;}
  .content{flex:1; padding:25px; text-align:center; overflow-y:auto;}
  .content h1{font-size:2rem; margin-bottom:10px;}
  .games-grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); gap:10px; margin-top:10px;}
  .game-item{background:var(--card-bg); padding:10px; border-radius:15px; text-align:center; cursor:pointer; transition:transform 0.2s;}
  .game-item:hover{transform:scale(1.05); background:#80d0ff33;}
  .rainbow-text{background:var(--rainbow); background-clip:text; -webkit-background-clip:text; color:transparent; animation: rainbow 5s linear infinite;}
  @keyframes rainbow{0%{background-position:0%}100%{background-position:100%}}

  /* Chat */
  #chatContainer{display:none; flex-direction:column; height:calc(100% - 60px);}
  #chatMessages{flex:1; overflow-y:auto; background:#00000022; padding:10px; border-radius:15px; margin-bottom:10px;}
  #chatInput{width:calc(100% - 100px); padding:10px; border-radius:15px; border:1px solid var(--accent); background:#00000033; color:#fff; outline:none;}
  #chatSend{width:80px;}
  .chat-message{margin:5px 0; text-align:left; display:flex; align-items:center; gap:5px;}

  /* Toggle button */
  .toggle-btn{position:absolute; bottom:20px; left:20px; padding:10px 15px; background:#80d0ff44; border-radius:20px; cursor:pointer; font-weight:600; color:#fff;}
</style>
</head>
<body>

<!-- Website Password Screen -->
<div class="card" id="lockCard">
  <h1>üîë HTMS Gaming</h1>
  <p>Enter password to enter the galaxy:</p>
  <input type="password" id="pw" placeholder="Password">
  <br>
  <button id="unlockBtn">Unlock</button>
  <div class="msg" id="msg"></div>
</div>

<!-- Main Site -->
<div class="main-site" id="mainSite">
  <div class="navbar">
    <div class="nav-left" id="homeBtn">üè† Home</div>
    <div class="nav-center" id="gamesBtn">üéÆ Games</div>
    <div class="nav-center" style="left:60%;">üì¢ Announcements</div>
    <div class="nav-right" id="supportBtn">üí´ Support</div>
    <div class="nav-extra" id="chatTabBtn">üí¨ Chat</div>
  </div>

  <!-- Home -->
  <div class="content" id="homeTab">
    <h1>üåå Welcome to HTMS Gaming</h1>
    <p>Credits To Chris (christopherafton on discord)</p>
    <div class="toggle-btn" id="bgToggle">Enjoy the background?</div>
  </div>

  <!-- Games -->
  <div class="content" id="gamesTab" style="display:none;">
    <h1 class="rainbow-text">Please finish your work before playing =)</h1>
    <div class="games-grid" id="gamesGrid">
      <!-- Games will be injected here -->
    </div>
  </div>

  <!-- Announcements -->
  <div class="content" id="announcementsTab" style="display:none;">
    <h1>üì¢ Announcements</h1>
    <div id="announcementsContent">No announcements yet.</div>
  </div>

  <!-- Support -->
  <div class="content" id="supportTab" style="display:none;">
    <h1>üí´ Support</h1>
    <p>THIS IS ONLY FOR SUGGESTIONS OR BUGS</p>
    <a href="https://docs.google.com/forms/d/1PcSHuVaHrJn7vhyGADq3xJmxooL-KKKU2vyE_gwmOBs/" target="_blank">Submit here</a>
  </div>

  <!-- Chat -->
  <div class="content" id="chatContainer">
    <h1>üí¨ HTMS Chat</h1>
    <div id="signupContainer">
      <h3>Sign Up</h3>
      <input type="text" id="signupUsername" placeholder="Username"><br>
      <input type="text" id="signupDisplayName" placeholder="Display Name"><br>
      <input type="password" id="signupPassword" placeholder="Password"><br>
      <input type="text" id="signupSecurity" placeholder="Security Question"><br>
      <button id="signupBtn">Sign Up</button>
      <p style="font-size:12px;">(Please don't use school credentials. Make it unique.)</p>
      <hr>
      <h3>Login</h3>
      <input type="text" id="loginUsername" placeholder="Username"><br>
      <input type="password" id="loginPassword" placeholder="Password"><br>
      <input type="text" id="loginSecurity" placeholder="Security Answer"><br>
      <button id="loginBtn">Login</button>
      <div id="loginMsg"></div>
    </div>
    <div id="chatArea" style="display:none;">
      <div id="chatMessages"></div>
      <input type="text" id="chatInput" placeholder="Message...">
      <button id="chatSend">Send</button>
    </div>
  </div>
</div>

<div class="card" id="adminLoginCard" style="display:none; position:fixed; bottom:20px; right:20px;">
  <h4>Admin Login</h4>
  <input type="password" id="adminPass" placeholder="Admin Password">
  <button id="adminLoginBtn">Login</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyAVIT4KcwdW07L8CdKr5rfhVCDHQofr-_8",
    authDomain: "htmsgaming-97774.firebaseapp.com",
    databaseURL: "https://htmsgaming-97774-default-rtdb.firebaseio.com",
    projectId: "htmsgaming-97774",
    storageBucket: "htmsgaming-97774.firebasestorage.app",
    messagingSenderId: "336556100091",
    appId: "1:336556100091:web:a84f3580ed346b5f22a35e",
    measurementId: "G-YJRDGEPGSW"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const auth = firebase.auth();

  // Website password
  const STORED_HASH = "425eff6720032338a0cea650966a475e074ddba46962a3995346dfaf273cf1d4";
  const lockCard = document.getElementById("lockCard");
  const mainSite = document.getElementById("mainSite");
  const msg = document.getElementById("msg");
  const pwInput = document.getElementById("pw");

  async function sha256(text) {
    const buffer = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(text));
    return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2, "0")).join("");
  }

  document.getElementById("unlockBtn").onclick = async () => {
    const hash = await sha256(pwInput.value.trim());
    if(hash === STORED_HASH){ lockCard.style.display="none"; mainSite.style.display="flex"; } 
    else { msg.textContent="‚ùå Wrong password!"; }
  }

  // Tabs
  const homeTab = document.getElementById("homeTab");
  const gamesTab = document.getElementById("gamesTab");
  const announcementsTab = document.getElementById("announcementsTab");
  const supportTab = document.getElementById("supportTab");
  const chatContainer = document.getElementById("chatContainer");

  document.getElementById("homeBtn").onclick = ()=>{showTab(homeTab);}
  document.getElementById("gamesBtn").onclick = ()=>{showTab(gamesTab);}
  document.getElementById("supportBtn").onclick = ()=>{showTab(supportTab);}
  document.getElementById("chatTabBtn").onclick = ()=>{showTab(chatContainer);}
  function showTab(tab){
    [homeTab,gamesTab,announcementsTab,supportTab,chatContainer].forEach(t=>t.style.display="none");
    tab.style.display="flex";
  }

  // Background toggle
  let bgOn = true;
  document.getElementById("bgToggle").onclick = ()=>{
    bgOn = !bgOn;
    document.body.style.background = bgOn ? 'radial-gradient(circle at bottom, #0d0130, #000010 80%)':'#000';
  }

  // Games injection
  const games = [
    "1v1.LoL.html","Ages of Conflict.html","Aviamasters.html","Bad Time Simulator.html","Baldi's Basics Classic Remastered.html",
    "Baldi's Basics Plus.html","Ball Blast.html","Basket Bros.html","Bendy and the Ink Machine.html","BlackJack.html",
    "Bottle Jump 3D.html","Bowmasters.html","Buckshot Roulette.html","BuildNow.gg.html","Candy Crush.html","Chat Bot (A._.I).html",
    "Cluster Rush.html","Cookie Clicker.html","Crossy Road.html","Cuphead.html","Drift Boss.html","Drift Hunters.html",
    "Five Nights at Freddy's 2.html","Five Nights at Freddy's 3.html","Five Nights at Freddy's 4.html","Five Nights at Freddy's.html",
    "Five Nights at Freddy's_ Sister Location.html","Five Nights at Freddy's_ Ultimate Custom Night.html",
    "Five Nights at Freddy's_ World.html","Five Nights at Winston's.html","Flappy Bird.html","Fruit Ninja.html",
    "Getting Over It with Bennett Foddy.html","Half Life.html","Hollow Knight.html","Jelly Drift.html","Karlson.html",
    "Money Rush.html","Paper.io 2.html","Pixel Gun Survival.html","Pizza Tower.html","Plinko.html","Pokemon Emerald.html",
    "Pokemon Red.html","PortaBoy+.html","R.E.P.O.html","Raft.html","Sandboxels.html","Slender_ The 8 Pages.html","Slope 2.html",
    "Slope.html","Solar Smash.html","Stickman Hook.html","Subway Surfers_ San Francisco.html","Temple Run 2.html",
    "That's Not My Neighbor.html","They Are Coming.html","Time Shooter 3_ SWAT.html","Tiny Fishing.html","Tomb Of The Mask.html",
    "Turbo Stars.html","World Box.html","minesweeper.html"
  ];

  const gamesGrid = document.getElementById("gamesGrid");
  games.forEach(game=>{
    const div = document.createElement("div");
    div.className="game-item";
    div.textContent = game.replace(".html","");
    div.onclick = ()=>{window.open(game,"_blank");};
    gamesGrid.appendChild(div);
  });

  // TODO: Add Firebase chat, admin panel, announcements logic, profile editing, reports, DMs
  // This is where Firebase real-time chat integration and admin panel will go.

</script>
</body>
</html>
