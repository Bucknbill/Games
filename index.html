<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTMS Gaming</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --accent: #80d0ff;
    --text: #f3f9ff;
    --nav-bg: rgba(0,0,0,0.4);
    --card-bg: rgba(255,255,255,0.12);
  }

  body {
    margin:0;
    font-family:'Poppins', sans-serif;
    background: radial-gradient(circle at bottom, #0d0130, #000010 80%);
    overflow:hidden;
    height:100vh;
    color: var(--text);
    display:flex;
    flex-direction:column;
    justify-content:flex-start;
    align-items:center;
  }

  canvas#bgCanvas {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    z-index:-1;
  }

  .card, .content, .chat-container, .games-grid {
    background: var(--card-bg);
    border-radius: 20px;
    padding:20px;
    box-shadow:0 0 25px rgba(128,208,255,0.4);
    backdrop-filter:blur(12px);
    transition:all 0.3s;
  }

  .navbar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    width:100%;
    padding:10px 20px;
    background: var(--nav-bg);
    backdrop-filter: blur(8px);
    font-weight:600;
    font-family:'Orbitron', sans-serif;
    position:relative;
  }

  .nav-left,.nav-center,.nav-right,.nav-middle {
    cursor:pointer;
    color: var(--text);
    margin:0 10px;
  }

  .nav-left:hover,.nav-center:hover,.nav-right:hover,.nav-middle:hover {
    color:var(--accent);
  }

  .nav-center { position:absolute; left:50%; transform:translateX(-50%);}
  .nav-middle { position:absolute; left:50%; transform:translateX(70%);}

  .tabs { width:95%; max-width:1200px; margin-top:15px; display:flex; justify-content:center; }

  .content { display:none; width:95%; max-width:1200px; margin:20px auto; text-align:center; flex-direction:column; }

  .active-tab { display:flex !important; flex-direction:column; }

  /* Games Grid */
  .games-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); grid-gap:15px; max-height:500px; overflow-y:auto; padding:10px; }

  .game-card {
    background: rgba(255,255,255,0.1);
    border-radius:12px;
    padding:10px;
    text-align:center;
    cursor:pointer;
    transition: transform 0.2s;
  }

  .game-card:hover { transform:scale(1.05); }

  /* Chat */
  .chat-container { display:flex; flex-direction:column; max-height:500px; overflow-y:auto; padding:10px; }
  .chat-message { margin:5px; padding:6px 10px; background: rgba(255,255,255,0.1); border-radius:12px; position:relative; }
  .chat-message .author { font-weight:600; margin-right:5px; }
  .chat-message button.report-btn { position:absolute; right:5px; top:5px; background:none; border:none; color:#ff7575; cursor:pointer; }
  .chat-input { margin-top:10px; display:flex; }
  .chat-input input { flex:1; padding:8px 12px; border-radius:12px; border:2px solid var(--accent); outline:none; }
  .chat-input button { padding:8px 12px; margin-left:5px; border-radius:12px; border:none; background:var(--accent); cursor:pointer; color:#0d0130; font-weight:600; }
  .chat-input button:hover { background:#a3e3ff; }

  /* Profile */
  .profile-editor { display:flex; flex-direction:column; gap:8px; max-width:400px; margin:0 auto; }
  .profile-editor input, .profile-editor textarea { width:100%; padding:8px; border-radius:10px; border:2px solid var(--accent); background:transparent; color:var(--text); }

  /* Admin Button */
  .admin-btn { position:absolute; bottom:10px; right:20px; padding:6px 12px; border-radius:12px; font-weight:600; cursor:pointer; background:linear-gradient(45deg,#ff0000,#00ff00,#0000ff); background-size:300% 300%; animation:rainbow 5s linear infinite; }
  @keyframes rainbow { 0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%} }

</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<!-- Password Lock -->
<div class="card" id="lockCard">
  <h1>üîí HTMS Gaming</h1>
  <p>Enter password:</p>
  <input type="password" id="pw" placeholder="Password">
  <br>
  <button id="unlockBtn">Unlock</button>
  <div class="msg" id="msg"></div>
</div>

<!-- Main Site -->
<div id="mainSite" style="display:none; width:100%; flex-direction:column; align-items:center;">

  <!-- Navbar -->
  <div class="navbar">
    <div class="nav-left" id="homeBtn">üè† Home</div>
    <div class="nav-center" id="annBtn">üì¢ Announcements</div>
    <div class="nav-middle" id="gamesBtn">üéÆ Games</div>
    <div class="nav-right" id="chatBtn">üí¨ Chat</div>
    <div class="nav-right" id="supportBtn" style="margin-left:20px;">üí´ Support</div>
  </div>

  <!-- Home Tab -->
  <div class="content active-tab" id="homeTab">
    <h1>üåå Welcome to HTMS Gaming</h1>
    <p>Explore your personal galaxy of fun and creativity.</p>
    <p>Credits To Chris (christopherafton on discord)</p>
    <label><input type="checkbox" id="toggleBG"> Enjoy the background?</label>
    <div style="margin-top:10px; cursor:pointer;" id="adminLoginLink">Admin Login</div>
  </div>

  <!-- Announcements Tab -->
  <div class="content" id="annTab">
    <h1>üì¢ Announcements</h1>
    <div id="announcementContent">No announcements yet.</div>
  </div>

  <!-- Games Tab -->
  <div class="content" id="gamesTab">
    <h2 style="font-weight:700; animation: rainbowCycle 5s linear infinite;">Please finish your work before playing =)</h2>
    <div class="games-grid" id="gamesGrid"></div>
  </div>

  <!-- Chat Tab -->
  <div class="content" id="chatTab">
    <h1>HTMS Chat</h1>
    <div class="chat-container" id="chatContainer"></div>
    <div class="chat-input">
      <input type="text" id="chatInput" placeholder="Type a message...">
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <!-- Support Tab -->
  <div class="content" id="supportTab">
    <h1>üí´ Support</h1>
    <p>Suggestions and Bugs</p>
    <a href="https://docs.google.com/forms/d/1PcSHuVaHrJn7vhyGADq3xJmxooL-KKKU2vyE_gwmOBs/" target="_blank">THIS IS ONLY FOR SUGGESTIONS OR BUGS</a>
  </div>

  <!-- Admin Panel -->
  <div class="content" id="adminTab">
    <h1>‚öôÔ∏è Admin Panel</h1>
    <div id="adminControls">
      <p>Manage announcements, users, chat logs here.</p>
    </div>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // -------------------------------
  // Firebase Initialization
  // -------------------------------
  const firebaseConfig = {
    apiKey: "AIzaSyAVIT4KcwdW07L8CdKr5rfhVCDHQofr-_8",
    authDomain: "htmsgaming-97774.firebaseapp.com",
    databaseURL: "https://htmsgaming-97774-default-rtdb.firebaseio.com",
    projectId: "htmsgaming-97774",
    storageBucket: "htmsgaming-97774.firebasestorage.app",
    messagingSenderId: "336556100091",
    appId: "1:336556100091:web:a84f3580ed346b5f22a35e",
    measurementId: "G-YJRDGEPGSW"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // -------------------------------
  // Password Lock
  // -------------------------------
  const STORED_HASH = "425eff6720032338a0cea650966a475e074ddba46962a3995346dfaf273cf1d4"; // sixgraderise
  const lockCard = document.getElementById("lockCard");
  const mainSite = document.getElementById("mainSite");
  const msg = document.getElementById("msg");
  const pwInput = document.getElementById("pw");

  async function sha256(text) {
    const buffer = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(text));
    return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2,"0")).join("");
  }

  document.getElementById("unlockBtn").onclick = async () => {
    const hash = await sha256(pwInput.value.trim());
    if(hash === STORED_HASH){
      lockCard.style.display="none";
      mainSite.style.display="flex";
    }else{
      msg.textContent="‚ùå Wrong password!";
    }
  };

  // -------------------------------
  // Tabs
  // -------------------------------
  const homeBtn = document.getElementById("homeBtn");
  const annBtn = document.getElementById("annBtn");
  const gamesBtn = document.getElementById("gamesBtn");
  const chatBtn = document.getElementById("chatBtn");
  const supportBtn = document.getElementById("supportBtn");

  const homeTab = document.getElementById("homeTab");
  const annTab = document.getElementById("annTab");
  const gamesTab = document.getElementById("gamesTab");
  const chatTab = document.getElementById("chatTab");
  const supportTab = document.getElementById("supportTab");
  const adminTab = document.getElementById("adminTab");

  function showTab(tab){
    [homeTab,annTab,gamesTab,chatTab,supportTab,adminTab].forEach(t=>t.classList.remove("active-tab"));
    tab.classList.add("active-tab");
  }

  homeBtn.onclick=()=>showTab(homeTab);
  annBtn.onclick=()=>showTab(annTab);
  gamesBtn.onclick=()=>showTab(gamesTab);
  chatBtn.onclick=()=>showTab(chatTab);
  supportBtn.onclick=()=>showTab(supportTab);

  // -------------------------------
  // Galaxy Background
  // -------------------------------
  const canvas = document.getElementById("bgCanvas");
  const ctx = canvas.getContext("2d");
  let stars=[], w=window.innerWidth, h=window.innerHeight;
  canvas.width=w; canvas.height=h;

  function initStars(num=200){
    stars=[];
    for(let i=0;i<num;i++){
      stars.push({
        x: Math.random()*w,
        y: Math.random()*h,
        r: Math.random()*1.5+0.5,
        dx:(Math.random()-0.5)/2,
        dy:(Math.random()-0.5)/2
      });
    }
  }

  function drawStars(){
    ctx.clearRect(0,0,w,h);
    stars.forEach(s=>{
      ctx.beginPath();
      ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
      ctx.fillStyle="white";
      ctx.fill();
      s.x+=s.dx; s.y+=s.dy;
      if(s.x<0)s.x=w;if(s.x>w)s.x=0;
      if(s.y<0)s.y=h;if(s.y>h)s.y=0;
    });
    requestAnimationFrame(drawStars);
  }

  initStars(400);
  drawStars();

  document.getElementById("toggleBG").addEventListener("change",(e)=>{
    if(!e.target.checked){ ctx.clearRect(0,0,w,h); } else { drawStars(); }
  });

  // -------------------------------
  // Games Tab (auto-load games)
  // -------------------------------
  const gamesGrid = document.getElementById("gamesGrid");
  const gamesList = [
    "1v1.LoL.html","Ages of Conflict.html","Aviamasters.html","Bad Time Simulator.html",
    "Baldi's Basics Classic Remastered.html","Baldi's Basics Plus.html","Ball Blast.html",
    "Basket Bros.html","Bendy and the Ink Machine.html","BlackJack.html","Bottle Jump 3D.html",
    "Bowmasters.html","Buckshot Roulette.html","BuildNow.gg.html","Candy Crush.html",
    "Chat Bot (A._.I).html","Cluster Rush.html","Cookie Clicker.html","Crossy Road.html",
    "Cuphead.html","Drift Boss.html","Drift Hunters.html","Five Nights at Freddy's 2.html",
    "Five Nights at Freddy's 3.html","Five Nights at Freddy's 4.html","Five Nights at Freddy's.html",
    "Five Nights at Freddy's_ Sister Location.html","Five Nights at Freddy's_ Ultimate Custom Night.html",
    "Five Nights at Freddy's_ World.html","Five Nights at Winston's.html","Flappy Bird.html",
    "Fruit Ninja.html","Half Life.html","Hollow Knight.html","Jelly Drift.html","Karlson.html",
    "Money Rush.html","Paper.io 2.html","Pixel Gun Survival.html","Pizza Tower.html","Plinko.html",
    "Pokemon Emerald.html","Pokemon Red.html","PortaBoy+.html","R.E.P.O.html","Raft.html",
    "Sandboxels.html","Slope 2.html","Slope.html","Solar Smash.html","Stickman Hook.html",
    "Subway Surfers_ San Francisco.html","Temple Run 2.html","That's Not My Neighbor.html",
    "They Are Coming.html","Time Shooter 3_ SWAT.html","Tiny Fishing.html","Tomb Of The Mask.html",
    "Turbo Stars.html","World Box.html","minesweeper.html","Getting Over It with Bennett Foddy.html
